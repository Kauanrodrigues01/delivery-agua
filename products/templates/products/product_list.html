{% extends 'base.html' %}
{% load static %}
{% block title %}Produtos{% endblock %}
{% block head %}
<link rel="stylesheet" href="{% static 'products/styles.css' %}">
{% endblock %}
{% block content %}
<main class="main-content">
    <div class="container">
        <!-- Hero Section -->
        <section class="hero-section">
            <h2>Nossos Produtos</h2>
            <p>Água pura e de qualidade para você e sua família. Entrega rápida e preços especiais.</p>
        </section>

        <!-- Products Grid -->
        <section class="products-grid" id="productsGrid">
            {% for product in products %}
            <div class="product-card" style="animation-delay: {{ forloop.counter0|add:'0.1' }}s">
                <div class="product-image">
                    {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.name }}" loading="lazy">
                    {% else %}
                    <img src="https://via.placeholder.com/200x200?text=Sem+Imagem" alt="{{ product.name }}"
                        loading="lazy">
                    {% endif %}
                </div>
                <div class="product-info">
                    <h3 class="product-name">{{ product.name }}</h3>
                    <p class="product-price">R$&nbsp;{{ product.price|floatformat:2 }}</p>
                    <a href="{% url 'product_detail' product.pk %}" class="btn btn-outline-primary btn-sm">Ver
                        Detalhes</a>
                    <button class="add-to-cart-btn btn btn-primary btn-sm mt-2" data-product-id="{{ product.pk }}">
                        Adicionar ao Carrinho
                    </button>
                </div>
            </div>
            {% empty %}
            <p>Nenhum produto cadastrado.</p>
            {% endfor %}
        </section>

        <!-- Contact Section -->
        <section class="contact-section">
            <h3>Faça seu Pedido Agora!</h3>
            <p>Entre em contato conosco pelos telefones abaixo ou adicione os produtos ao carrinho</p>
            <div class="contact-phones">
                <span class="phone">(85) 99233-8103</span>
                <span class="separator">•</span>
                <span class="phone">(85) 99169-0986</span>
            </div>
        </section>
    </div>
</main>

<div class="cart-overlay" id="cartOverlay"></div>
<div class="cart-sidebar" id="cartSidebar">
    <div class="cart-header">
        <h3>Carrinho de Compras</h3>
        <button class="cart-close" id="cartClose">
            <i data-lucide="x"></i>
        </button>
    </div>

    <div class="cart-content" id="cartContent">
        <div class="cart-empty" id="cartEmpty">
            <p>Seu carrinho está vazio</p>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Cart items will be dynamically inserted here -->
        </div>
    </div>

    <div class="cart-footer" id="cartFooter" style="display: none;">
        <div class="cart-total">
            <span>Total:</span>
            <span class="total-price" id="totalPrice">R$ 0,00</span>
        </div>
        <button class="checkout-button">Finalizar Pedido</button>
    </div>
</div>

<!-- Toast Notification -->
<div class="toast" id="toast">
    <div class="toast-content">
        <i data-lucide="check-circle"></i>
        <div class="toast-text">
            <strong id="toastTitle">Produto adicionado!</strong>
            <p id="toastDescription">Item foi adicionado ao seu carrinho.</p>
        </div>
    </div>
</div>

<script src="{% static '/products/script.js' %}"></script>
{% endblock %}